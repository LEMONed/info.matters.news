var cvs=document.createElement("canvas"),context=cvs.getContext("2d");document.body.appendChild(cvs),cvs.id="circle";var parent=cvs.parentNode,cvswrapper=document.getElementById("particles");parent.replaceChild(cvswrapper,cvs),cvswrapper.appendChild(cvs);var currDot,numDots=100,n=numDots,maxRad=300,minRad=100,radDiff=maxRad-minRad,dots=[],pairs=[];for(PI=Math.PI,centerPt={x:0,y:0},resizeHandler(),window.onresize=resizeHandler,n=numDots;n--;)(currDot={}).x=currDot.y=0,currDot.radius=minRad+Math.random()*radDiff,currDot.radiusV=10+50*Math.random(),currDot.radiusVS=.015*(1-2*Math.random()),currDot.radiusVP=Math.random()*PI,currDot.ang=(1-2*Math.random())*PI,currDot.speed=1-2*Math.random(),currDot.intensity=Math.round(255*Math.random()),currDot.fillColor="rgb("+currDot.intensity+","+currDot.intensity+","+currDot.intensity+")",dots.push(currDot);for(n=numDots;n--;)for(ni=n;ni--;)pairs.push([n,ni]);function drawPoints(){n=numDots;var t,r=centerPt,o=context;for(o.clearRect(0,0,cvs.width,cvs.height),n=numDots;n--;)(currDot=dots[n]).radiusVP+=currDot.radiusVS,t=currDot.radius+Math.sin(currDot.radiusVP)*currDot.radiusV,currDot.x=r.x+Math.sin(currDot.ang)*t,currDot.y=r.y+Math.cos(currDot.ang)*t,currDot.ang+=currDot.speed*t/51200;var a,e,i,c,s=Math.pow(100,2);for(n=pairs.length;n--;)a=pairs[n],e=dots[a[0]],i=dots[a[1]],(c=Math.pow(i.x-e.x,2)+Math.pow(i.y-e.y,2))<s&&(Math.round(50*(s-c)/s),o.beginPath(),o.moveTo(e.x,e.y),o.lineTo(i.x,i.y),o.lineWidth=1,o.strokeStyle="rgba(255,255,255,0.1)",o.stroke());for(n=numDots;n--;)o.fillStyle=dots[n].fillColor,o.fillRect(dots[n].x,dots[n].y,1,1);window.requestAnimationFrame(drawPoints)}function resizeHandler(){var t=cvs.getBoundingClientRect(),r=t.width,n=t.height;cvs.width=r,cvs.height=n,centerPt.x=Math.round(r/2),centerPt.y=Math.round(n/2)}var ratio=window.devicePixelRatio||1,canvas=document.querySelector("canvas");context=canvas.getContext("2d");canvas.width*=ratio,canvas.height*=ratio,context.scale(ratio,ratio),drawPoints();